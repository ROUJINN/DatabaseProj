没问题，我们把这个过程拆解成**“傻瓜式”操作指南**。假设你们使用 **GitHub** 或 **Gitee (码云)**，并且每个人电脑上都装好了 Git。

为了方便理解，我们设定角色：
*   **仓库地址**：`origin`
*   **开发总分支**：`dev`
*   **你**：正在做“登录功能”，需要创建 `feature/login` 分支。

---

### 第一阶段：准备工作（项目刚开始做1次）

由**组长**（或者负责建仓库的人）操作：
1.  在 GitHub/Gitee 上建好仓库。
2.  本地初始化代码，推送到 `main`。
3.  **关键步骤**：基于 `main` 创建一个 `dev` 分支，并推送到远程。
    ```bash
    git checkout -b dev   # 创建并切换到 dev
    git push origin dev   # 把 dev 推送到远程仓库
    ```
4.  **所有人**：把仓库 Clone 下来。

---

### 第二阶段：日常开发（每个人每天都要做的）

比如你是组员，今天要写“登录功能”。

#### 1. 切回 dev 并拉取最新代码（防止冲突的第一步）
在你开始写代码之前，**必须**保证你的基础代码是最新的。
```bash
git checkout dev      # 切换到 dev 分支
git pull origin dev   # 把远程 dev 别人合并好的代码拉下来
```

#### 2. 创建自己的功能分支
不要在 `dev` 上直接改！创建一个新分支。
```bash
git checkout -b feature/login
# 解释：-b 意思是 create branch，名字叫 feature/login
```
现在你可以随意写代码了，怎么改都不会影响别人。

#### 3. 提交代码 (Commit)
代码写了一部分或者写完了：
```bash
git add .
git commit -m "完成登录页面的前端布局"
```

#### 4. 推送到远程 (Push)
把你的分支推送到网页上，这样别人才能看见。
```bash
git push origin feature/login
```
*(注意：这里是 push 你的个人分支，不是 push dev)*

---

### 第三阶段：发起合并请求 (Pull Request / PR)

这时候，你的代码在 GitHub/Gitee 的 `feature/login` 分支上，你想把它合进 `dev`。

1.  **打开网页**：登录 GitHub 或 Gitee 项目主页。
2.  **找到提示**：通常你刚 Push 完，网页上方会自动弹出一个横幅：“feature/login had recent pushes...”，旁边有个绿色的按钮 **Compare & pull request**。
    *   如果没有提示，点击菜单栏的 “Pull Requests” -> “New Pull Request”。
3.  **选择分支（最关键的一步！！！）**
    *   **Base (目标分支)**：选 `dev` (千万别默认选了 main/master)。
    *   **Compare (源分支)**：选你刚才推上去的 `feature/login`。
    *   *箭头意思：把 feature/login 的代码 -> 合并进 -> dev*
4.  **填写描述**：标题写清楚“完成了登录功能”，内容里稍微写下改了啥。
5.  **点击创建**：Click **Create Pull Request**。

---

### 第四阶段：代码评审 (Review) 与 合并

这时候，就把链接发到微信群：“兄弟们，我登录写完了，提 PR 了，麻烦看一下。”

1.  **另外两名队友**：
    *   点开链接，点击 **Files changed** 标签。
    *   **看一眼：** 有没有把数据库密码写死？有没有把无用的测试代码传上来？格式乱不乱？
    *   **通过：** 如果没问题，点击右上角的 "Approve" 或者直接在群里说“没问题”。
2.  **合并 (Merge)**：
    *   通常由**组长**或者**你自己**（如果队友说OK了），点击页面底部的绿色大按钮 **Merge pull request**，然后点 **Confirm merge**。
3.  **删除分支**：
    *   合并成功后，网页会提示你可以删除 `feature/login`，点 Delete branch 删掉远程分支，保持仓库整洁。

---

### 第五阶段：闭环

刚才你的代码已经进 `dev` 了。现在你要开始写“注册功能”了，怎么办？

**回到第一步！**

1.  切回本地 dev：`git checkout dev`
2.  拉取最新（把你刚才合并进去的代码，拉回你本地）：`git pull origin dev`
3.  建新分支：`git checkout -b feature/register`
4.  继续干活...

---

### 💡 常见问题急救包

**Q: 提 PR 的时候，网页提示 "Can't automatically merge" (有冲突) 怎么办？**
> **A:** 这说明你改的文件，别人也改了，并且别人比你先合并进 `dev`。
> **解决方法（在本地解决）：**
> 1. 回到你的代码工具（IDEA/VSCode）。
> 2. 确保你在你的 `feature/login` 分支上。
> 3. 运行命令：`git pull origin dev` (意思就是：把远程最新的 dev 强行拉到我现在的分支里来)。
> 4. 这时候代码会变红（报错），打开那些冲突的文件。
> 5. IDE 会显示 `<<<< HEAD` 和 `>>>> dev`。你要人工决定保留哪段代码，删掉多余的符号。
> 6. 修好后，保存。
> 7. 再次 `git add .` -> `git commit` -> `git push`。
> 8. 刷新网页，冲突就消失了，可以点击 Merge 了。

**Q: 我们坐在一起，能不能不搞 PR 这么麻烦？**
> **A:** 如果真的很急，或者坐在一起开发。可以省略 Review 环节，自己提 PR 自己点 Merge。
> **但是：** 依然建议保留“**个人分支 -> 合并到 dev**”这个过程。
> **千万不要** 三个人都在本地 `dev` 分支上改，改完直接 push `dev`。一旦报错，你们都不知道是谁把 `dev` 搞挂的，排查起来比提 PR 慢多了。


**是的！对于你们这种3人小团队，强烈建议在同一个仓库内进行，千万不要用 Fork！**

用 Fork 模式会无端增加很多工作量（比如同步上游代码），那是给开源项目（比如成百上千互不相识的人开发）用的。

你们是熟人合作，使用的是 **“Collaborator（合作者）模式”**。

### 1. 为什么不用 Fork？
*   **Fork 模式**：你得把别人的仓库 Fork 到自己名下，推送到自己的仓库，再跨仓库提 PR。每次主仓库更新了，你还得配置两个远程地址（upstream 和 origin）来同步代码……**太繁琐了，容易把自己绕晕。**
*   **合作者模式（同一个仓库）**：大家都是仓库的“主人”，都有权限读写。大家连的都是同一个地址，都在同一个池子里建分支。

### 2. 只有一步需要额外操作：添加成员
因为仓库是其中一个人建的（假设是组长），默认只有组长有权限写入。组长需要做一步操作：

1.  **打开 GitHub/Gitee 仓库页面**。
2.  找到 **Settings (设置)**。
3.  找到 **Collaborators (合作者)** 或 **Manage Access (成员管理)**。
4.  点击 **Add people**，输入另外两个同学的账号/邮箱，发送邀请。
5.  **另外两名同学**：去邮箱或者 GitHub 通知里点击 **Accept Invitation (接受邀请)**。

**接受之后，你们三个人对这个仓库的权限就是一样的了（都可以 Push）。**

---

### 3. 同一个仓库内的 PR 是什么样子的？

在同一个仓库里，PR 的本质就不再是“我的仓库合并到你的仓库”，而是：

> **“把这个仓库里的 A 分支（feature/xxx），合并到这个仓库里的 B 分支（dev）”**

### 4. 为了防止误操作（进阶保险措施）

既然大家都在同一个仓库，权限很大，万一有人**手滑**，直接在 `main` 或 `dev` 分支上强制推送（Force Push）或者删库怎么办？

建议组长在 **Settings** 里设置一下 **Branch Protection Rules (分支保护规则)**：

1.  在 Settings -> Branches -> Add rule。
2.  **Branch name pattern**: 输入 `main` (或者 `dev`)。
3.  勾选 **Require a pull request before merging**（必须提 PR 才能合并，不能直接 Push）。
4.  勾选 **Require approvals**（比如设置为 1，必须有一人点通过才能合并）。

**配置了这个之后：**
即使你们在本地 `git push origin dev`，由于没有提 PR，Git 会直接报错拒绝推送。这就从系统层面强制执行了你们的合作规范，**想不规范都不行，非常安全！**


在你们这个三人小组的开发模式中，`main` 分支扮演的是**“正式发布版”**或**“绝对稳定版”**的角色。

可以把 `main` 理解为玩游戏时的**“完美存档点”**。你不会每打一个小怪就存个档（那是 `dev`），你只有在打完一个大 BOSS，或者要进入下一章剧情时，才会郑重地存一个档。

以下是更新 `main` 的 3 个最佳时机和具体操作：

### 什么时候更新 `main`？

#### 1. 完成“里程碑”功能时 (Milestones)
当你们完成了一大块功能，并且**在 `dev` 分支上测试过没问题**时。
*   *例子：* “用户管理模块（登录、注册、修改密码）全部做完了，且测通了。” -> **合入 main**。
*   *意义：* 这是一个存档。万一后面做“订单模块”把代码搞烂了，你们可以随时回退到只有“用户管理”且能运行的状态。

#### 2. 老师检查/中期答辩前 (Checkpoints)
很多课程会有中期检查。
*   *例子：* 明天要给老师看进度。
*   *操作：* 今天晚上，确认 `dev` 能跑起来，没有红色的报错，然后合入 `main`。
*   *意义：* 演示的时候，直接运行 `main` 分支的代码。**千万不要演示 `dev` 分支**，因为 `dev` 可能刚合并了一段没写完的代码，容易在老师面前“翻车”（Demo Effect）。

#### 3. 最终提交/答辩前 (Final Release)
*   *例子：* 截止日期前一晚，或者答辩前。
*   *意义：* 这就是你们最终交给学校的版本。

---

### 怎么更新 `main`？

操作逻辑和之前一模一样，只是对象变了。

**动作：提一个 Pull Request (PR)**

1.  **Base (目标分支)**：选 `main`。
2.  **Compare (源分支)**：选 `dev`。
3.  **标题**：写上版本号或里程碑，例如 `Release v1.0: 完成用户与商品模块`。
4.  **操作**：
    *   大家一起由组长点击 Merge。
    *   Merge 完之后，最好由一个人负责在本地 `git pull origin main` 下来，**启动项目运行一次**，确保这个“存档”是真的能用的。

### 进阶技巧：打标签 (Tag) —— 强烈推荐

在代码合入 `main` 之后，建议在 GitHub/Gitee 页面上打一个 **Tag**（标签）。
*   比如：`v0.1-login`，`v0.5-midterm`，`v1.0-final`。
*   **好处**：
    *   Git 的 Tag 就像书签。
    *   万一答辩前一晚改代码改崩了，你可以迅速通过 Tag 找到“上周中期检查时那个肯定能跑的版本”，一键下载 zip 包，先拿去应付答辩，保命要紧。

### 总结三条铁律：

1.  **平时不要碰 `main`**：日常只在 `feature` 写，合到 `dev` 测。
2.  **`main` 必须是绿色的**：任何时候，任何人拉取 `main` 分支的代码，必须能直接启动，不能有报错。
3.  **演示只用 `main`**：给别人看的时候，永远只展示 `main` 分支的内容。